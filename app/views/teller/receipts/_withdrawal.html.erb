<% primary_leg = posting_legs.find { |l| l.side == "debit" && !l.account_reference.to_s.start_with?("cash:") } %>
<% from_ref = primary_leg&.account_reference %>
<% account = from_ref.present? ? Account.find_by(account_number: from_ref) : nil %>
<% masked = account ? masked_account_number(from_ref) : (from_ref || "â€”") %>

<table class="table table-xs text-xs w-full">
  <%= render "teller/receipts/receipt_served_party", posting_batch: posting_batch %>
  <tr>
    <td>Amount:</td>
    <td class="text-right tabular-nums"><%= receipt_money(teller_transaction.amount_cents) %></td>
  </tr>
</table>

<%= render "teller/receipts/receipt_account_info", posting_batch: posting_batch %>
