<% meta = posting_batch.metadata || {} %>
<% meta = meta.with_indifferent_access if meta.respond_to?(:with_indifferent_access) %>
<% vt = meta["vault_transfer"] || meta[:vault_transfer] || {} %>
<% vt = vt.with_indifferent_access if vt.respond_to?(:with_indifferent_access) %>
<% source_ref = vt["source_cash_account_reference"] || vt[:source_cash_account_reference] %>
<% dest_ref = vt["destination_cash_account_reference"] || vt[:destination_cash_account_reference] %>
<% reason = (vt["reason_code"] || vt[:reason_code]).to_s.humanize.presence || (vt["memo"] || vt[:memo]).to_s.presence || "—" %>
<% branch = teller_transaction.branch %>
<% user = teller_transaction.user %>

<div class="receipt-type-details text-sm">
  <p>From:          <%= cash_location_display_name(source_ref, branch) %></p>
  <p>To:            <%= cash_location_display_name(dest_ref, branch) %></p>
  <p>Reason:        <%= reason %></p>
  <p>Amount:        <%= receipt_money(teller_transaction.amount_cents) %></p>
</div>

<div class="receipt-auth mt-3 text-sm">
  <p>Auth: <%= user.teller_number.presence || teller_transaction.workstation&.code || "—" %> - <%= user.display_label %></p>
</div>
